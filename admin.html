<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arcade Master - Administration</title>
    
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

    <div id="top-bar">
        <div id="menuToggle" class="menu-toggle">
            <i class="fa-solid fa-bars"></i>
        </div>
        <span style="font-size: 1.5em; font-weight: bold; color: var(--color-neon-red);">
            ADMINISTRATION
        </span>
        <div style="display: flex; align-items: center; gap: 15px;">
            <a href="boutique.html" class="currency-display" title="Boutique">
                <span class="coin-count">0</span>
                <button id="trollButton" type="button">+</button>
            </a>
            <a href="compte.html" style="color: var(--color-text-light);" title="Mon Compte" data-emoji="üë§">
                üë§
            </a>
        </div>
    </div>

    <div id="sidebar" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" id="closeNav" onclick="closeNav()" style="position: absolute; top: 0; right: 25px; font-size: 36px; color: var(--color-neon-orange);">&times;</a>
        <div id="nav-links">
            <a href="index.html" data-emoji="üè†">üè† Accueil</a>
            <a href="jeux.html" data-emoji="üéÆ">üéÆ Menu Jeux</a>
            <a href="compte.html" data-emoji="üë§">üë§ Mon Compte</a>
            <a href="boutique.html" data-emoji="üõçÔ∏è">üõçÔ∏è Boutique</a>
            <a href="classement.html" data-emoji="üèÜ">üèÜ Classement</a>
            <a href="credits.html" data-emoji="üìú">üìú Cr√©dits</a>
            <a href="admin.html" data-emoji="üîë" style="border-left: 5px solid var(--color-neon-red); color: var(--color-neon-red);">üîë Administration</a>
        </div>
    </div>

    <div class="main-container" id="mainContent">
        <div style="padding-top: 50px;"></div> 
        
        <h1 style="font-size: 2.5em; color: var(--color-neon-red); text-align: center;">PANNEAU ADMINISTRATEUR</h1>
        
        <div id="adminContent" style="max-width: 800px; margin: 30px auto; text-align: left;">
            <p style="color: var(--color-text-light); text-align: center;">
                Cette page est r√©serv√©e aux administrateurs pour la gestion des donn√©es de d√©veloppement.
            </p>
            
            <div id="adminLogin" class="auth-card" style="border-color: var(--color-neon-red); box-shadow: 0 0 20px rgba(255, 0, 85, 0.3);">
                <h2>Acc√®s Restreint</h2>
                <p style="text-align: center; color: var(--color-neon-red);">Vous devez √™tre connect√© en tant qu'administrateur.</p>
            </div>

            <div id="adminTools" style="display: none;">
                <h2 style="color: var(--color-neon-red);">Outils de Donn√©es</h2>
                
                <div class="card-group" style="justify-content: flex-start; margin-left: 0;">
                    
                    <div class="action-card" onclick="displayAllUsers()">
                        <span class="card-icon">üë•</span>
                        <h3 style="color: var(--color-neon-red);">Voir Utilisateurs</h3>
                        <p>Afficher toutes les donn√©es du LocalStorage.</p>
                    </div>

                    <div class="action-card" onclick="resetAllData()">
                        <span class="card-icon">üí£</span>
                        <h3 style="color: var(--color-neon-red);">R√©initialiser Tout</h3>
                        <p>Retour aux utilisateurs de base. **ATTENTION**</p>
                    </div>

                </div>

                <div id="userDataDisplay" class="stats-card" style="margin-top: 40px; border-color: var(--color-neon-red);">
                    <h3 style="color: var(--color-neon-red);">Console de Donn√©es</h3>
                    <pre id="userJsonOutput" style="white-space: pre-wrap; word-wrap: break-word; font-size: 0.8em; color: var(--color-text-light); background-color: #000000; padding: 10px; border-radius: 5px;">Les donn√©es s'afficheront apr√®s le clic...</pre>
                </div>
            </div>
            
        </div>
        
    </div>
    
    <script src="base.js"></script>
    <script src="auth.js"></script>
    <script>
        function checkAdminAccess() {
            const user = getCurrentUser();
            const loginSection = document.getElementById('adminLogin');
            const toolsSection = document.getElementById('adminTools');

            if (user && user.role === 'admin') {
                loginSection.style.display = 'none';
                toolsSection.style.display = 'block';
            } else {
                loginSection.style.display = 'block';
                toolsSection.style.display = 'none';
            }
            updateTopBar();
        }
        
        window.displayAllUsers = function() {
            const users = loadUsers();
            document.getElementById('userJsonOutput').textContent = JSON.stringify(users, null, 2);
        }

        window.resetAllData = function() {
            if (confirm("√ätes-vous S√õR de vouloir r√©initialiser TOUTES les donn√©es utilisateur au profil par d√©faut ? Cela effacera tous les scores et pi√®ces.")) {
                localStorage.removeItem(LOCAL_STORAGE_KEY);
                localStorage.removeItem(LOCAL_STORAGE_CURRENT_USER);
                initUsers();
                checkAdminAccess();
                alert("R√©initialisation compl√®te effectu√©e.");
                document.getElementById('userJsonOutput').textContent = "Donn√©es r√©initialis√©es au profil de base.";
            }
        }

        document.addEventListener('DOMContentLoaded', checkAdminAccess);
    </script>
</body>
</html>
